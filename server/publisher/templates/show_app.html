{% extends "publisher/base.html" %}

{% load filters %}

{% block title %}{{app.name}}{% endblock %}
{% block content %}
	<h3>
		<a href="{% url publisher_index %}">Apps</a> &gt; {{app.name}}
		<div class="toolbar">
			<a href="{% url publisher_app_update %}?id={{app.key}}">
				Edit App
			</a>
		</div>
	</h3>
	<table>
		<tr><th>Name</th><td>{{app.name}}</td></tr>
		<tr><th>Platform</th><td>{{app.app_type}}</td></tr>
		<tr><th>URL</th><td>{{app.url}}</td></tr>
	</table>
	
	<h3>
		Ad Units
		<div class="toolbar">
      <button onClick="javascript:Toggle.display('add_adunit_box');return false;" class="btn"><span><span>+ New Ad Unit</span></span></button>
		</div>
	</h3>
	<form method="post" action="{% url publisher_create %}" id="add_adunit_box" style="display:none;" class="special_notice">
		<input type="hidden" name="id" value="{{app.key}}"/>
		<table>
			<tr>
				<th>Name</th><td><input type='text' name="name" size="30" placeholder="My Ad Unit"/></td>
			</tr>
			<tr><th>Description</th>
				<td><textarea rows="4" cols="40" name="description" placeholder="Top of main page, 320x50"></textarea></td></tr>
			<tr><td colspan="2"><h4>Ad Properties</h4></td></tr>
				<th>Preferred Ad Type</th><td><select name='ad_type'><option value="image">Text and image</option><option value="text">Text only</option></select></td>
			<tr><th>Default keywords</th>
				<td><textarea rows="4" cols="40" name="keywords" placeholder="One per line, e.g. coffee"></textarea></td></tr>
			<tr><td colspan="2"><h4>Backfill Strategy</h4></td></tr>
      <tr> 
        <th>Backfill Behavior</th><td><select name="backfill"> 
            <option value="adsense" selected>Google AdSense</option> 
            <option value="iAd"  >Apple iAd</option> 
            <option value="clear"  >Show background color</option> 
            <option value="fail">Return an error</option> 
          </td> 
      </tr> 
      <tr> 
        <th>Threshold CPM</th><td><input type="text" name="backfill_threshold_cpm" size=5/> USD</td> 
      </tr> 

			<tr><td></td><td><input type='submit' value="Add Ad Unit &raquo;"/></td></tr>
		</table>
	</form>
	
	<table class="wide">
		<form method="post" action="{% url publisher_delete %}">
			{% if sites %}
				<thead>
					<th></th>
					<th>Name</th>
					<th>Status</th>
					<th>Max Bid</th>
					<th width="75px">Impr.</th>
					<th width="75px">Clicks</th>
					<th width="75px">Cost</th>
				</thead>
			{% else %}
				<tr><td colspan=10>No ad units.</td></tr>
			{% endif %}
			{% for s in sites %}
				<tr>
					<td><input type="checkbox" name="id" value="{{s.key}}"/></td>
					<td><a href="{% url publisher_show %}?id={{ s.key }} %}">{{s.name}}</a></td>
					<td class="numeric">{{s.bid|currency}}</td>
					<td class="numeric">{{s.stats.impression_count}}</td>
					<td class="numeric">{{s.stats.click_count}} ({{s.stats.ctr|percentage}})</td>
					<td class="numeric">{{s.stats.revenue|currency}}</td>
				</tr>
			{% endfor %}
				<tr>
					<td colspan=8>
						<p></p><input type='submit' name='delete' value='Delete Ad Units'/>
					</td>
				</tr>
		</form>
	</table>
	
	
{% endblock %}
