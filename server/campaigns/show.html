{% extends "../base.html" %}
{% block title %}{{campaign.name}}{% endblock %}
{% block content %}
	<h3>
		<a href="/campaigns">Campaigns</a> &gt; {{campaign.name}}
		<div class="toolbar">
			<a href="/campaigns/edit?id={{campaign.key}}" onclick="javascript:Toggle.display('edit_box');return false;">
				Edit Campaign
			</a>
		</div>
	</h3>
	<table>
		<tr><th>Status</th>
			<td class="numeric"><b>
				{% if campaign.deleted %}
					Deleted
				{% endif %}
				{% if campaign.active and not campaign.deleted %}
					Active
				{% endif %}
				{% if not campaign.active and not campaign.deleted %}
					Paused
				{% endif %}
			</b></td>
			<td>
				<form method="post" action="/campaigns/pause?id={{campaign.key}}" style="display: inline;"><input type="submit" value="Pause"></form>
				<form method="post" action="/campaigns/delete?id={{campaign.key}}" style="display: inline;"><input type="submit" value="Delete"></form>
			</tr>
		<tr><th>Daily budget</th><td class="numeric">{{campaign.budget|currency}}</td></tr>
		<tr><th>Bid strategy</th>
				<td class="numeric">{% ifequal campaign.bid_strategy "cpc" %}By click (CPC){% endifequal %}
						{% ifequal campaign.bid_strategy "cpm" %}By impression (CPM){% endifequal %}</td></tr>
		<tr><th>Geo predicates</th><td class="numeric">{% for g in campaign.geo_predicates %}{{g}}<br/>{% endfor %}</td></tr>
		<tr><th>Device predicates</th><td class="numeric">{% for g in campaign.device_predicates %}{{g}}<br/>{% endfor %}</td></tr>
	</table>
	
	<h3>
		Ad Groups
		<div class="toolbar">
			<a href="#" onclick="javascript:Toggle.display('add_keyword_box');return false;">
				Create Ad Group
			</a>
		</div>
	</h3>
	<form method="post" action="/campaigns/bid/create" id="add_keyword_box" style="display:none;" class="special_notice">
		<input type="hidden" name="id" value="{{campaign.key}}"/>
		<table>
			<tr>
				<th>Name</th><td><input type='text' name="name" size="30" placeholder="My Ad Group"/></td>
			</tr>
			<tr><th>Max Bid</th><td><input type='text' name="bid" placeholder="0.50" size="8"/> USD</td></tr>
			<tr><td colspan="2"><h4>Ad Group Targeting</h4> <p>Your bids will be matched with available inventory by matching keywords or 
					matching placements in your existing applications.</p></td></tr>
			<tr><th>Keywords</th>
				<td><textarea rows="4" cols="40" name="keywords" placeholder="Keywords, one per line, e.g. coffee"></textarea></td></tr>
			<tr><th>Placements</th>
				<td><ul style="overflow:auto; height:100px; list-style: none;">
					{% for s in sites %}
							<li style="margin-left: 0;"><input type="checkbox" name="sites" value="{{s.key}}"> {{s.name}}</input></li>
					{% endfor %}
					</ul></td></tr>
			<tr><td></td><td><input type='submit' value="Create Ad Group &raquo;"/></td></tr>
		</table>
	</form>
	
	<table class="wide">
		<form method="post" action="/campaigns/bid/remove">
			{% if bids %}
				<thead>
					<th></th>
					<th>Name</th>
					<th>Status</th>
					<th>Max Bid</th>
					<th width="75px">Impr.</th>
					<th width="75px">Clicks</th>
					<th width="75px">Cost</th>
				</thead>
			{% else %}
				<tr><td colspan=10>No ad groups.</td></tr>
			{% endif %}
			{% for b in bids %}
				<tr>
					<td><input type="checkbox" name="id" value="{{b.key}}"/></td>
					<td><a href="/campaigns/adgroup/{{b.key}}">{{b.name}}</a></td>
					<td><b>{% if b.deleted %}
						Deleted
					{% endif %}
					{% if b.active and not b.deleted %}
						Active
					{% endif %}
					{% if not b.active and not b.deleted %}
						Paused
					{% endif %}</b></td>
					<td class="numeric">{{b.bid|currency}}</td>
					<td class="numeric">{{b.stats.impression_count}}</td>
					<td class="numeric">{{b.stats.click_count}} ({{b.stats.ctr|percentage}})</td>
					<td class="numeric">{{b.stats.revenue|currency}}</td>
				</tr>
			{% endfor %}
			{% if campaign.stats %}			
				<tr>
					<td></td>
					<th><b>Totals</b></th>
					<td></td>
					<td></td>
					<td class="numeric">{{campaign.stats.impression_count}}</td>
					<td class="numeric">{{campaign.stats.click_count}} ({{campaign.stats.ctr|percentage}})</td>
					<td class="numeric">{{campaign.stats.revenue|currency}}</td>
					<td></td>
				</tr>
			{% endif %}
				<tr>
					<td colspan=8>
						<p></p><input type='submit' name='delete' value='Delete Ad Groups'/>
					</td>
				</tr>
		</form>
	</table>
	
	
{% endblock %}
