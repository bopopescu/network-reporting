{% load filters %}
{% load elements %}

<tr class="sub lineitem-row {{ line_item.status }}" id="{{ line_item.key }}">
  {% if show_status %}
    <td class="controls">
      <input class="status_change_control"
             id="{{line_item.key}}"
             type="checkbox"></input>
      {% status_icon line_item %}
    </td>
  {% else %}
    <td></td>
  {% endif %}
  
  <td class="name"
      {% if not line_item.active %}{% opacity "0.2" %}{% endif %}>
    <a class="order-name"
       href='{% url advertiser_order_detail order_key=line_item.campaign.key %}'
       style="font-size:12px;">
      {{ line_item.campaign.name }}
    </a> > 
    <br />
    <a href='{% url advertiser_line_item_detail line_item_key=line_item.key %}'>
      {{ line_item.name }}
    </a>
    <br />
    <span class="muted"> {{ line_item.status|capitalize }} </span>
    <img id="{{ line_item.key }}-img" class="hidden loading-img" src="/images/spin-small.gif" />
  </td>
  
  <td class="advertiser stat"
      {% if not line_item.active %}{% opacity "0.4" %}{% endif %}>
    {{ line_item.campaign.advertiser }}
  </td>
  <td class="type stat"
      {% if not line_item.active %}{% opacity "0.4" %}{% endif %}>
    {{ line_item.adgroup_type_display }}
  </td>
  <td class="goal stat"
      {% if not line_item.active %}{% opacity "0.4" %}{% endif %}>
    {{ line_item.budget_goal_display|default:'--' }}
  </td>
  <td class="rev stat"
      {% if not line_item.active %}{% opacity "0.4" %}{% endif %}>
    {{ line_item.stats.revenue|default:"--" }}
  </td>
  <td class="imp stat"
      {% if not line_item.active %}{% opacity "0.4" %}{% endif %}>
    {{ line_item.stats.impression_count|default:"--" }}
  </td>
  <td class="clk stat"
      {% if not line_item.active %}{% opacity "0.4" %}{% endif %}>
    {{ line_item.stats.click_count|default:"--" }}
  </td>
  <td class="ctr stat"
      {% if not line_item.active %}{% opacity "0.4" %}{% endif %}>
    {{ line_item.stats.ctr|default:"--" }}
  </td>
  <td class="stat"
      {% if not line_item.active %}{% opacity "0.4" %}{% endif %}>
    <div class="conv">
      {{ line_item.stats.conv|default:"--" }}
    </div>
    <div class="muted conv_rate">
      ({{ line_item.stats.conv_rate|default:"--" }})
    </div>
  </td>
  <td class="delivery stat"
      {% if not line_item.active %}{% opacity "0.4" %}{% endif %}>
    <div class="progress progress-striped
      {% if line_item.status == "running" %}active{% endif %}
      {% if line_item.status == "paused" %}progress-info {% endif %}">
      <div class="bar" style="width: 50%">50%</div>
    </div>
  </td>
  <td class="popdown">
    <i class="moreinfo icon-chevron-down" id="popover-{{line_item.key}}"></i>
  </td>
</tr>
