{% extends 'base.html' %}
{% load filters %}
{% block navLinks %}
            <li><a href="{% url publisher_index %}">Dashboard</a></li>
            <li class="active"><a href="{% url advertiser_campaign %}">Campaigns</a></li>
            <li><a href="{% url reports_index %}">Reports</a></li>
{% endblock navLinks %}
{% block pageTitle %}<h1>Ad Network Reports</h1>{% endblock pageTitle %}
{% block messageCenter %}{% endblock messageCenter %}
{% block titleBarRight %}{% endblock titleBarRight %}

{% block extraScripts %}
  <script type="text/javascript">
    $(function() {
        $("#dashboard-dateOptions").remove();
    });
  </script>
{% endblock extraScripts %}

{% block content %}

  {% if aggregate_stats %}
    <table width=100%>
      <thead>
        <th> App </th>
        <th> Ad Network </th>
        <th> Revenue </th>
        <th> Attempts </th>
        <th> Impressions </th>
        <th> Fill Rate</th>
        <th> Clicks </th>
        <th> CTR </th>
      </thead>
      <tbody>
        {% for key, mapper, stats in aggregate_stats %}
          <tr>
            <td class="name"><a href='/ad_network_reports/app_view/{{key}}'>{{mapper.application.name}}</a></td>
            <td class="name">{{mapper.ad_network_name}}</td>
            <td class="revenue dataTable-data numeric">{{stats.revenue}}</td>
            <td class="attempts dataTable-data numeric">{{stats.attempts}}</td>
            <td class="impressions dataTable-data numeric">{{stats.impressions}}</td>
            <td class="fill_rate dataTable-data numeric">{{stats.fill_rate}}</td>
            <td class="clicks dataTable-data numeric">{{stats.clicks}}</td>
            <td class="click dataTable-data numeric">{{stats.ctr}}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

    <a class="right btn" href='/ad_network_reports/add'>Add more network credentials</a>
  {% else %}
    <a class="right btn" href='/ad_network_reports/add'>Set up network reporting</a>
  {% endif %}

{% endblock content %}
