var mopub=mopub||{};mopub.Utils=mopub.Utils||{};if(typeof window.console=="undefined"){window.console={log:function(){}}}(function(d){var i=window.mopub||{};var e=window.Chart||{};var b=window.Stats||{};d(document).ready(function(){if(typeof mpq.push!="undefined"){try{d("#dashboard-dateOptions-option-7").click(function(){mpq.push(["track","7 Day Date-option clicked"])});d("#dashboard-dateOptions-option-14").click(function(){mpq.push(["track","14 Day Date-option clicked"])});d("#dashboard-dateOptions-option-30").click(function(){mpq.push(["track","30 Day Date-option clicked"])});d("#dashboard-dateOptions-option-custom").click(function(){mpq.push(["track","Custom Date-option clicked"])});d("#stats-breakdown-dateOptions-option-0").click(function(){mpq.push(["track",'"Today" clicked in Stats Breakdown'])});d("#stats-breakdown-dateOptions-option-1").click(function(){mpq.push(["track",'"Yesterday" clicked in Stats Breakdown'])});d("#stats-breakdown-dateOptions-option-2").click(function(){mpq.push(["track",'"All" clicked in Stats Breakdown'])})}catch(j){}}if(d("#is_admin_input").val()=="False"){d(".marketplace").hide()}var l="/js/libs/jquery-ui-1.8.7.custom/css/mopub/images";d.preLoadImages("/images/ui/ui-button-active.png","/images/ui/ui-button-default.png","/images/ui/ui-button-hover.png","/images/ui/ui-icons-active.png","/images/ui/ui-icons-focus.png","/images/ui/ui-icons-hover.png","/images/ui/ui-icons-progress.png",l+"/ui-bg_highlight-hard_25_e57300_1x100.png",l+"/ui-bg_highlight-hard_50_dddddd_1x100.png",l+"/ui-bg_highlight-hard_100_f3f3f3_1x100.png",l+"/ui-bg_inset-soft_25_595959_1x100.png",l+"/ui-icons_0090d9_256x240.png",l+"/ui-icons_cc2929_256x240.png",l+"/ui-icons_ffffff_256x240.png","/placeholders/image.gif");d("legend").each(function(){var n=d(this);var m=d("<h2>"+n.html()+"</h2>");m.attr("class",n.attr("class"));m.attr("id",n.attr("id"));n.replaceWith(m)});d(".button").button().css({visibility:"visible"});d(".buttonset").buttonset().css({visibility:"visible"});d(".buttonset-start-disabled").buttonset();d(".buttonset-start-disabled").buttonset({disabled:true});d(".selectmenu").selectmenu().css({visibility:"visible"});d(".validate").validate();d(".sortable").tablesorter();d(".tabs").tabs();d(".pills").tabs();d.extend(d.ui.dialog.prototype.options,{modal:true,resizable:false,draggable:false,width:400});d.datepicker.setDefaults({dayNamesMin:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]});d("input[placeholder], textarea[placeholder]").placeholder({preventRefreshIssues:true});d("#titlebar .breadcrumb h1, .dataTable-name .inner").textOverflow(" &hellip;");d(".dropdown-head").dropdown(".dropdown");d(".alert-message .close").click(function(){d(this).parent().fadeOut()});d.fn.qtip.styles.mopub={background:"#303030",color:"#ffffff",border:{radius:5},tip:{size:{x:10,y:10}},name:"dark"};d("a[title]").qtip({style:{name:"mopub",tip:true}});d(".formFields-field-help-link[title]").click(function(m){m.preventDefault()});function k(){if(d(".messageCenter-message").length===0){d("#messageCenter").hide()}}k();d(".messageCenter-message-moreInfoLink").click(function(o){o.preventDefault();var m=d(this);var n=d(".messageCenter-message-moreInfo",m.parents(".messageCenter-message"));n.clone().dialog({buttons:{Close:function(){d(this).dialog("close")}},close:function(q,p){d(this).remove()}})});d(".messageCenter-message-hide").click(function(o){o.preventDefault();var n=d(this);var m=n.parents(".messageCenter-message");m.fadeOut("fast",function(){m.remove();k()})});Highcharts.setOptions({chart:{animation:false,backgroundColor:null,borderRadius:0,margin:[30,0,30,45],height:185},title:{text:null},lang:{loading:"Loading ..."},credits:{enabled:false},style:{fontFamily:'"myriad-pro-1", "myriad-pro-2", Helvetica, Arial, sans-serif'},plotOptions:{series:{animation:false,shadow:false,stickyTracking:false},area:{lineWidth:4,fillOpacity:0.1,stacking:"normal",marker:{lineWidth:2,radius:5,symbol:"circle",states:{hover:{lineWidth:2,radius:7}}},states:{hover:{lineWidth:4}}}},xAxis:{endOnTick:false,gridLineWidth:0.5,gridLineColor:"#dddddd",lineWidth:1,lineColor:"#cccccc",type:"datetime",labels:{style:{fontFamily:'"myriad-pro-1", "myriad-pro-2", Helvetica, Arial, sans-serif',color:"#999",fontSize:"10px"},y:20},dateTimeLabelFormats:{second:"%b %e %l:%M:%S%p",minute:"%b %e %l:%M%p",hour:"%b %e %l:%M%p",day:"%b %e",week:"%b %e",month:"%b %Y",year:"%Y"},tickColor:"#dddddd",tickLength:5,tickWidth:0.5},yAxis:{showFirstLabel:false,showLastLabel:true,gridLineWidth:0.5,gridLineColor:"#dddddd",min:0,title:{text:null},labels:{style:{fontFamily:'"myriad-pro-1", "myriad-pro-2", Helvetica, Arial, sans-serif',color:"#999",fontSize:"10px"},x:-5}},legend:{borderColor:null,borderRadius:0,borderWidth:0,align:"center",verticalAlign:"top",y:-17,itemStyle:{fontFamily:'"myriad-pro-1", "myriad-pro-2", Helvetica, Arial, sans-serif',size:"12px",cursor:"pointer",color:"#444444"},itemHoverStyle:{color:"#e57300"},itemHiddenStyle:{color:"#ccc"},lineHeight:12,symbolPadding:6,symbolWidth:12},tooltip:{backgroundColor:"rgba(255, 255, 255, .9)",style:{fontFamily:'"myriad-pro-1", "myriad-pro-2", Helvetica, Arial, sans-serif',fontSize:"13px",padding:"10px"}}});d(".whatsthis").live("click",function(m){m.preventDefault();d("#"+d(this).attr("id").replace("helpLink","helpContent")).dialog({buttons:{Close:function(){d(this).dialog("close")}}})})});function g(){var l={};var j=window.location.search.slice(1).split("&");var m;for(var k=0;k<j.length;k++){m=j[k].split("=");l[m[0]]=m[1]}return l}var f=g();var a=[];d.preLoadImages=function(){var l=arguments.length;for(var k=l;k--;){var j=document.createElement("img");j.src=arguments[k];a.push(j)}};d.fn.dropdown=function(j){var k=this;var n,m=false;o();function l(){if(d(j).hasClass("invisible")){}d(j).removeClass("invisible");d(k).addClass("hovered")}function o(){if(!d(j).hasClass("invisible")){d(j).addClass("invisible")}d(k).removeClass("hovered")}d(this).hover(function(){n=true},function(){n=false});d(j).hover(function(){m=true},function(){m=false});setInterval(function(){if(n||m){l()}else{o()}},1)};function h(j){return j.hasClass("active")}function c(k,j){if(j.length>1){j.each(function(){d(this).removeClass("active")})}else{j.find(".active").removeClass("active")}k.addClass("active")}d.fn.tabs=function(){var k=d(".tab-section");var l=d(this);var j=d("li",l);d.each(j,function(m,p){var o=d("a",p);d(o).click(function(q){q.preventDefault()});var n=o.attr("href");d(p).click(function(){c(d(this),l);c(d(n),k);window.location.hash=n+"-tab"});if(window.location.hash==n+"-tab"){d(p).click()}})};d.unescapeHTML=function(j){return d("<div />").html(j).text()};d.escapeHTML=function(j){return d("<div />").text(j).html()};d.fn.lightswitch=function(m,k){if(typeof m=="undefined"){m=function(){return true}}if(typeof k=="undefined"){k=function(){return true}}var j=d(this);var l=d(".switch",j);j.click(function(){if(l.hasClass("on")){var n=k();if(n){l.removeClass("on").addClass("off")}}else{if(l.hasClass("off")){var n=m();if(n){l.removeClass("off").addClass("on")}}else{l.addClass("off")}}})};d.fn.lightswitchOn=function(){var j=d(this);var k=d(".switch",j);k.removeClass("off").addClass("on")};d.fn.lightswitchOff=function(){var j=d(this);var k=d(".switch",j);k.removeClass("on").addClass("off")};i.Utils=i.Utils||{};i.Utils.formatNumberWithCommas=function(n){n+="";var j=n.split(".");var m=j[0];var k=j.length>1?"."+j[1]:"";var l=/(\d+)(\d{3})/;while(l.test(m)){var m=m.replace(l,"$1,$2")}return m+k};i.Utils.formatCurrency=function(j){return"$"+i.Utils.formatNumberWithCommas(j.toFixed(2))};i.Utils.formatNumberAsPercentage=function(j){return(j*100).toFixed(2)+"%"};i.Utils.getKeysFromObject=function(j){var l=[];for(var k in j){if(j.hasOwnProperty(k)){l.push(k)}}return l};b.sortStatsObjectsByStat=function(k,j){k.sort(function(m,l){var o=parseFloat(m.stats["sum"][j]);var n=parseFloat(l.stats["sum"][j]);if(o<n){return 1}if(o>n){return -1}else{return 0}});return k};b.statArrayFromDailyStats=function(k,j){return d.map(k,function(l){return parseFloat(l[j])})};b.getGraphSummedStatsForStatName=function(k,n){var j=[];var p=n.splice(0,3);var m=n;d.each(p,function(s,q){var r=q.key;var u=q.stats["daily_stats"];var t={};t[r]=b.statArrayFromDailyStats(u,k);j.push(t)});if(m.length==0){return j}var l=b.sumDailyStatsAcrossStatsObjects(m,k);var o={Others:l};j.push(o);return j};b.sumDailyStatsAcrossStatsObjects=function(l,k){var j=[];d.each(l,function(n,m){var o=m.stats["daily_stats"];d.each(o,function(q,p){if(!j[q]){j[q]=0}j[q]+=parseFloat(p[k])})});return j};b.getGraphCtrStats=function(m){var j=[];var o=m.splice(0,3);var l=m;d.each(o,function(r,p){var q=p.key;var t=p.stats["daily_stats"];var s={};s[q]=b.statArrayFromDailyStats(t,"ctr");j.push(s)});if(l.length==0){return j}var k=b.getDailyCtrAcrossStatsObjects(l);var n={Others:k};j.push(n);return j};b.getDailyCtrAcrossStatsObjects=function(n){var m=[];var l=b.sumDailyStatsAcrossStatsObjects(n,"click_count");var o=b.sumDailyStatsAcrossStatsObjects(n,"impression_count");for(var k=0,j=l.length;k<j;k++){m[k]=(o[k]===0)?0:l[k]/o[k]}return m};e.moneyLabelFormatter=function(){return"$"+Highcharts.numberFormat(this.value,0)};e.percentageLabelFormatter=function(){return Highcharts.numberFormat(this.value,0)+"%"};e.numberLabelFormatter=function(){if(this.value>=1000000000){return Highcharts.numberFormat(this.value/1000000000,0)+"B"}else{if(this.value>=1000000){return Highcharts.numberFormat(this.value/1000000,0)+"M"}else{if(this.value>=1000){return Highcharts.numberFormat(this.value/1000,0)+"K"}else{if(this.value>0){return Highcharts.numberFormat(this.value,0)}else{return"0"}}}}};e.defaultTooltipFormatter=function(){var k=Highcharts.numberFormat(this.y,0);var j=Highcharts.numberFormat(this.total,0);var l='<span style="font-size: 14px;">'+Highcharts.dateFormat("%A, %B %e, %Y",this.x)+'</span><br/><span style="padding: 0; font-weight: 600; color: '+this.series.color+'">'+this.series.name+'</span>: <strong style="font-weight: 600;">'+k+"</strong><br/>";return l};e.highChartDefaultOptions={chart:{defaultSeriesType:"line",margin:[30,0,30,45]},legend:{verticalAlign:"bottom",y:-7,enabled:true},yAxis:{labels:{formatter:e.numberLabelFormatter}},tooltip:{formatter:e.defaultTooltipFormatter}};e.createStatsChart=function(j,o,m){if(typeof m=="undefined"){m={}}if(typeof o=="undefined"){e.chartError();return}var k=["#0090d9","#e57300","#53a600","#444444","#60beef"];d.each(o,function(p,q){if(typeof q.color=="undefined"){q.color=k[p%k.length]}q.lineWidth=4});var l=d.extend(e.highChartDefaultOptions,{chart:{renderTo:j.replace("#","")},series:o});var n=new Highcharts.Chart(l)};e.insertStatsChart=function(j,l,m){var k=d(j)};e.setupDashboardStatsChart=function(l){var k=d("#dashboard-stats .stats-breakdown .active");if(k===null||k.length===0){return}var q=k.attr("id").split("-");var m=q[q.length-1];var n=i.dashboardStatsChartData;if(typeof n=="undefined"){e.chartError();return}var j=["#0090d9","#e57300","#53a600","#444444"];var o=[];var p=n[m];if(typeof p=="undefined"){e.chartError();return}d.each(p,function(u,v){var r,t,s;d.each(v,function(w,x){r=w;t=x;if(l=="line"){s=(r=="MoPub Optimized")?3:2}else{s=4}});o.push({name:r,data:t,color:j[u],lineWidth:s})});this.trafficChart=new Highcharts.Chart({chart:{renderTo:"dashboard-stats-chart",defaultSeriesType:l,marginTop:0,marginBottom:55,height:185},plotOptions:{series:{pointStart:n.pointStart,pointInterval:n.pointInterval}},legend:{verticalAlign:"bottom",y:-7,enabled:(o.length>1)},yAxis:{labels:{formatter:function(){if(m=="revenue"||m=="ecpm"){return"$"+Highcharts.numberFormat(this.value,0)}else{if(m=="ctr"){return Highcharts.numberFormat(this.value,0)+"%"}else{if(this.value>=1000000000){return Highcharts.numberFormat(this.value/1000000000,0)+"B"}else{if(this.value>=1000000){return Highcharts.numberFormat(this.value/1000000,0)+"M"}else{if(this.value>=1000){return Highcharts.numberFormat(this.value/1000,0)+"K"}else{if(this.value>0){return Highcharts.numberFormat(this.value,0)}else{return"0"}}}}}}return"0"}}},tooltip:{formatter:function(){var t="",s="",r="";if(m=="revenue"||m=="ecpm"){s="$"+Highcharts.numberFormat(this.y,2);r="$"+Highcharts.numberFormat(this.total,2)+" total"}else{if(m=="clicks"){s=Highcharts.numberFormat(this.y,0)+" "+m;r=Highcharts.numberFormat(this.total,0)+" total "+m}else{if(m=="ctr"){s=Highcharts.numberFormat(this.y*100,2)+"% click through";r=""}else{s=Highcharts.numberFormat(this.y,0)+" "+m;r=Highcharts.numberFormat(this.total,0)+" total "+m}}}t+='<span style="font-size: 14px;">'+Highcharts.dateFormat("%A, %B %e, %Y",this.x)+"</span><br/>";t+='<span style="padding: 0; font-weight: 600; color: '+this.series.color+'">'+this.series.name+'</span>: <strong style="font-weight: 600;">'+s+"</strong><br/>";if(o.length>1){t+='<span style="font-size: 12px; color: #666;">';if(this.total>0&&r){t+="("+Highcharts.numberFormat(this.percentage,0)+"% of "+r+")"}else{if(r){t+="("+r+")"}}t+="</span>"}return t}},series:o});d("#dashboard-stats-chart").removeClass("chart-loading")};e.setupPieChart=function(j,k,l){this.impressionPieChart=new Highcharts.Chart({chart:{renderTo:j,plotBackgroundColor:null,plotShadow:true,margin:0},title:{text:k},tooltip:{formatter:function(){return"<b>"+this.point.name+"</b>: "+this.point.total+" "+k}},plotOptions:{pie:{allowPointSelect:true,cursor:"pointer",dataLabels:{enabled:false,color:"#000000",connectorColor:"#000000",formatter:function(){return"<b>"+this.point.name+"</b>: "+this.percentage.toFixed(2)+" %"}},showInLegend:true}},legend:{verticalAlign:"bottom"},series:[{type:"pie",name:k,data:l}]})};e.chartError=function(){d("#dashboard-stats-chart").removeClass("chart-loading").addClass("chart-error")};window.Chart=e;window.Stats=b;window.mopub=i;window.mopub.Stats=b;window.mopub.Chart=e;window.Mopub=i})(this.jQuery);