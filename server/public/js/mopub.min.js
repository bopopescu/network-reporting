var mopub=mopub||{};mopub.Utils=mopub.Utils||{};if(typeof window.console=="undefined"){window.console={log:function(){}}}(function(f){f(document).ready(function(){if(f("#is_admin_input").val()=="False"){f(".marketplace").hide()}var h="/js/mylibs/jquery-ui-1.8.7.custom/css/mopub/images";f.preLoadImages("/images/ui/ui-button-active.png","/images/ui/ui-button-default.png","/images/ui/ui-button-hover.png","/images/ui/ui-icons-active.png","/images/ui/ui-icons-focus.png","/images/ui/ui-icons-hover.png","/images/ui/ui-icons-progress.png",h+"/ui-bg_highlight-hard_25_e57300_1x100.png",h+"/ui-bg_highlight-hard_50_dddddd_1x100.png",h+"/ui-bg_highlight-hard_100_f3f3f3_1x100.png",h+"/ui-bg_inset-soft_25_595959_1x100.png",h+"/ui-icons_0090d9_256x240.png",h+"/ui-icons_cc2929_256x240.png",h+"/ui-icons_ffffff_256x240.png","/placeholders/image.gif");f("legend").each(function(){var j=f(this);var i=f("<h2>"+j.html()+"</h2>");i.attr("class",j.attr("class"));i.attr("id",j.attr("id"));j.replaceWith(i)});f(".button").button().css({visibility:"visible"});f(".buttonset").buttonset().css({visibility:"visible"});f(".buttonset-start-disabled").buttonset();f(".buttonset-start-disabled").buttonset({disabled:true});f(".selectmenu").selectmenu().css({visibility:"visible"});f(".validate").validate();f(".sortable").tablesorter();f(".tabs").tabs();f.extend(f.ui.dialog.prototype.options,{modal:true,resizable:false,draggable:false,width:400});f.datepicker.setDefaults({dayNamesMin:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]});f("input[placeholder], textarea[placeholder]").placeholder({preventRefreshIssues:true});f("#titlebar .breadcrumb h1, .dataTable-name .inner").textOverflow(" &hellip;");f(".dropdown-head").dropdown(".dropdown");f(".alert-message .close").click(function(){f(this).parent().fadeOut()});f.fn.qtip.styles.mopub={background:"#303030",color:"#ffffff",border:{radius:5},tip:{size:{x:10,y:10}},name:"dark"};f("a[title]").qtip({style:{name:"mopub",tip:true}});f(".formFields-field-help-link[title]").click(function(i){i.preventDefault()});function g(){if(f(".messageCenter-message").length===0){f("#messageCenter").hide()}}g();f(".messageCenter-message-moreInfoLink").click(function(k){k.preventDefault();var i=f(this);var j=f(".messageCenter-message-moreInfo",i.parents(".messageCenter-message"));j.clone().dialog({buttons:{Close:function(){f(this).dialog("close")}},close:function(m,l){f(this).remove()}})});f(".messageCenter-message-hide").click(function(k){k.preventDefault();var j=f(this);var i=j.parents(".messageCenter-message");i.fadeOut("fast",function(){i.remove();g()})});f(".stats-breakdown tr").click(function(j){var k=f(this);if(!k.hasClass("active")){var i=k.parents("table");f("tr.active",i).removeClass("active");k.addClass("active")}});Highcharts.setOptions({chart:{animation:false,backgroundColor:null,borderRadius:0,margin:[30,0,30,45]},title:{text:null},lang:{loading:"Loading ..."},credits:{enabled:false},style:{fontFamily:'"myriad-pro-1", "myriad-pro-2", Helvetica, Arial, sans-serif'},plotOptions:{series:{animation:false,shadow:false,stickyTracking:false},area:{lineWidth:4,fillOpacity:0.1,stacking:"normal",marker:{lineWidth:2,radius:5,symbol:"circle",states:{hover:{lineWidth:2,radius:7}}},states:{hover:{lineWidth:4}}}},xAxis:{endOnTick:false,gridLineWidth:0.5,gridLineColor:"#dddddd",lineWidth:1,lineColor:"#cccccc",type:"datetime",labels:{style:{fontFamily:'"myriad-pro-1", "myriad-pro-2", Helvetica, Arial, sans-serif',color:"#999",fontSize:"10px"},y:20},dateTimeLabelFormats:{second:"%b %e %l:%M:%S%p",minute:"%b %e %l:%M%p",hour:"%b %e %l:%M%p",day:"%b %e",week:"%b %e",month:"%b %Y",year:"%Y"},tickColor:"#dddddd",tickLength:5,tickWidth:0.5},yAxis:{showFirstLabel:false,showLastLabel:true,gridLineWidth:0.5,gridLineColor:"#dddddd",min:0,title:{text:null},labels:{style:{fontFamily:'"myriad-pro-1", "myriad-pro-2", Helvetica, Arial, sans-serif',color:"#999",fontSize:"10px"},x:-5}},legend:{borderColor:null,borderRadius:0,borderWidth:0,align:"center",verticalAlign:"top",y:-17,itemStyle:{fontFamily:'"myriad-pro-1", "myriad-pro-2", Helvetica, Arial, sans-serif',size:"12px",cursor:"pointer",color:"#444444"},itemHoverStyle:{color:"#e57300"},itemHiddenStyle:{color:"#ccc"},lineHeight:12,symbolPadding:6,symbolWidth:12},tooltip:{backgroundColor:"rgba(255, 255, 255, .9)",style:{fontFamily:'"myriad-pro-1", "myriad-pro-2", Helvetica, Arial, sans-serif',fontSize:"13px",padding:"10px"}}});f(".whatsthis").click(function(i){i.preventDefault();f("#"+f(this).attr("id").replace("helpLink","helpContent")).dialog({buttons:{Close:function(){f(this).dialog("close")}}})})});var c=[];f.preLoadImages=function(){var j=arguments.length;for(var h=j;h--;){var g=document.createElement("img");g.src=arguments[h];c.push(g)}};var b={};f.renderTemplate=function a(i,h){var g=!/\W/.test(i)?b[i]=b[i]||a(document.getElementById(i).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+i.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return h?g(h):g};f.fn.renderTemplate=function(h,g){return f(this).html(f.renderTemplate(h,g))};f.fn.dropdown=function(g){var h=this;var k,j=false;l();function i(){if(f(g).hasClass("invisible")){}f(g).removeClass("invisible");f(h).addClass("hovered")}function l(){if(!f(g).hasClass("invisible")){f(g).addClass("invisible")}f(h).removeClass("hovered")}f(this).hover(function(){k=true},function(){k=false});f(g).hover(function(){j=true},function(){j=false});setInterval(function(){if(k||j){i()}else{l()}},1)};function e(g){return g.hasClass("active")}function d(h,g){if(g.length>1){g.each(function(){f(this).removeClass("active")})}else{g.find(".active").removeClass("active")}h.addClass("active")}f.fn.tabs=function(){var h=f(".tab-section");var i=f(this);var g=f("li",i);f.each(g,function(j,m){var l=f("a",m);f(l).click(function(n){n.preventDefault()});var k=l.attr("href");f(m).click(function(){d(f(this),i);d(f(k),h)})})};f.unescapeHTML=function(g){return f("<div />").html(g).text()};f.escapeHTML=function(g){return f("<div />").text(g).html()};f.fn.lightswitch=function(j,h){if(typeof j=="undefined"){j=function(){return true}}if(typeof h=="undefined"){h=function(){return true}}var g=f(this);var i=f(".switch",g);g.click(function(){if(i.hasClass("on")){var k=h();if(k){i.removeClass("on").addClass("off")}}else{if(i.hasClass("off")){var k=j();if(k){i.removeClass("off").addClass("on")}}else{i.addClass("off")}}})};mopub.Utils.formatNumberWithCommas=function(h){h+="";x=h.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var g=/(\d+)(\d{3})/;while(g.test(x1)){x1=x1.replace(g,"$1,$2")}return x1+x2};mopub.Utils.formatCurrency=function(g){return"$"+g.toFixed(2)};mopub.Utils.formatNumberAsPercentage=function(g){return(g*100).toFixed(2)+"%"};mopub.Utils.getKeysFromObject=function(g){var i=[];for(var h in g){if(g.hasOwnProperty(h)){i.push(h)}}return i}})(this.jQuery);(function(d,c){var b=d.AjaxChunkedFetch=function(f){this.items={};this.chunkComplete=function(i,h,g){};this.chunkFailure=function(h,g){};this.fetchComplete=function(g){};c.extend(this,f);this.isComplete=false;this.hasFailed=false;this.unfetchedItems={};var e=this;c.each(this.items,function(g,h){e.unfetchedItems[h]={}});return this};b.chunkArray=function(g,f){if(!g){return[]}var e=[];c.each(g,function(h,k){var j=Math.floor(h/f);var i=h%f;e[j]=e[j]||[];e[j][i]=k});return e};b.TIMEOUT_MILLISECONDS=10000;b.MAX_FAILED_ATTEMPTS=3;b.DEFAULT_CHUNK_SIZE=8;b.BACKOFF_TIME_MILLISECONDS=1000;b.BACKOFF_MULTIPLIER=1.5;b.prototype.unfetchedItemsEmpty=function(){for(var e in this.unfetchedItems){if(this.unfetchedItems.hasOwnProperty(e)){return false}}return true};b.prototype.start=function(){this.isComplete=false;this.hasFailed=false;var e=b.chunkArray(this.items,b.DEFAULT_CHUNK_SIZE);this.executeFetchRequestsForChunks(e)};b.prototype.executeFetchRequestsForChunks=function(h){if(h.length<=0){this.isComplete=true;this.fetchComplete(this);return}if(!this.urlConstructor){this.hasFailed=true;for(var g=0,e=h.length;g<e;g++){this.chunkFailure(chunk,this)}return}var f=this;c.each(h,function(j,i){var k=new a({items:i,url:f.urlConstructor(i,f),success:f.chunkComplete,failure:f.chunkFailure,fetchObject:f});k.execute()})};b.prototype.markItemsComplete=function(f){var e=this;c.each(f,function(g,h){delete e.unfetchedItems[h]});if(this.unfetchedItemsEmpty()){this.isComplete=true;this.hasFailed=false;this.fetchComplete(this)}};b.prototype.markAsFailed=function(){this.hasFailed=true};b.prototype.retry=function(){if(!this.hasFailed){return}var e=mopub.Utils.getKeysFromObject(this.unfetchedItems);var f=b.chunkArray(e,b.DEFAULT_CHUNK_SIZE);this.executeFetchRequestsForChunks()};var a=b.FetchRequest=function(e){this.items=[];this.url="";this.success=function(f){};this.failure=function(){};this.failedAttempts=0;this.backoffDelay=b.BACKOFF_TIME_MILLISECONDS;c.extend(this,e);return this};a.prototype.execute=function(){var e=this;c.ajax({url:e.url,dataType:"json",success:function(){return function(f){e.success(f,e.items,e.fetchObject);e.fetchObject.markItemsComplete(e.items)}}(),error:function(){e.failedAttempts++;if(e.failedAttempts>b.MAX_FAILED_ATTEMPTS){e.failure(e.items,e.fetchObject);e.fetchObject.markAsFailed()}else{setTimeout(function(){e.execute()},e.backoffDelay);e.backoffDelay*=b.BACKOFF_MULTIPLIER}},timeout:b.TIMEOUT_MILLISECONDS})}})(mopub.Utils=mopub.Utils||{},this.jQuery);(function(b,a){b.sortStatsObjectsByStat=function(d,c){d.sort(function(f,e){var h=parseFloat(f.stats["sum"][c]);var g=parseFloat(e.stats["sum"][c]);if(h<g){return 1}if(h>g){return -1}else{return 0}});return d};b.statArrayFromDailyStats=function(d,c){return a.map(d,function(e){return parseFloat(e[c])})};b.getGraphSummedStatsForStatName=function(d,g){var c=[];var i=g.splice(0,3);var f=g;a.each(i,function(l,j){var k=j.key;var n=j.stats["daily_stats"];var m={};m[k]=b.statArrayFromDailyStats(n,d);c.push(m)});if(f.length==0){return c}var e=b.sumDailyStatsAcrossStatsObjects(f,d);var h={Others:e};c.push(h);return c};b.sumDailyStatsAcrossStatsObjects=function(e,d){var c=[];a.each(e,function(g,f){var h=f.stats["daily_stats"];a.each(h,function(j,i){if(!c[j]){c[j]=0}c[j]+=parseFloat(i[d])})});return c};b.getGraphCtrStats=function(f){var c=[];var h=f.splice(0,3);var e=f;a.each(h,function(k,i){var j=i.key;var m=i.stats["daily_stats"];var l={};l[j]=b.statArrayFromDailyStats(m,"ctr");c.push(l)});if(e.length==0){return c}var d=b.getDailyCtrAcrossStatsObjects(e);var g={Others:d};c.push(g);return c};b.getDailyCtrAcrossStatsObjects=function(g){var f=[];var e=b.sumDailyStatsAcrossStatsObjects(g,"click_count");var h=b.sumDailyStatsAcrossStatsObjects(g,"impression_count");for(var d=0,c=e.length;d<c;d++){f[d]=(e[d]/h[d])||0}return f}})(mopub.Stats=mopub.Stats||{},this.jQuery);(function(a,b){a.setupDashboardStatsChart=function(e){var d=b("#dashboard-stats .stats-breakdown .active");if(d===null||d.length===0){return}var j=d.attr("id").split("-");var f=j[j.length-1];var g=mopub.dashboardStatsChartData;if(typeof g=="undefined"){a.chartError();return}var c=["#0090d9","#e57300","#53a600","#444444"];var h=[];var i=g[f];if(typeof i=="undefined"){a.chartError();return}b.each(i,function(n,o){var k,m,l;b.each(o,function(p,q){k=p;m=q;if(e=="line"){l=(k=="MoPub Optimized")?3:2}else{l=4}});h.push({name:k,data:m,color:c[n],lineWidth:l})});this.trafficChart=new Highcharts.Chart({chart:{renderTo:"dashboard-stats-chart",defaultSeriesType:e,marginTop:0,marginBottom:55},plotOptions:{series:{pointStart:g.pointStart,pointInterval:g.pointInterval}},legend:{verticalAlign:"bottom",y:-7,enabled:(h.length>1)},yAxis:{labels:{formatter:function(){if(f=="revenue"||f=="ecpm"){return"$"+Highcharts.numberFormat(this.value,0)}else{if(f=="ctr"){return Highcharts.numberFormat(this.value,0)+"%"}else{if(this.value>=1000000000){return Highcharts.numberFormat(this.value/1000000000,0)+"B"}else{if(this.value>=1000000){return Highcharts.numberFormat(this.value/1000000,0)+"M"}else{if(this.value>=1000){return Highcharts.numberFormat(this.value/1000,0)+"K"}else{if(this.value>0){return Highcharts.numberFormat(this.value,0)}else{return"0"}}}}}}return"0"}}},tooltip:{formatter:function(){var m="",l="",k="";if(f=="revenue"||f=="ecpm"){l="$"+Highcharts.numberFormat(this.y,2);k="$"+Highcharts.numberFormat(this.total,2)+" total"}else{if(f=="clicks"){l=Highcharts.numberFormat(this.y,0)+" "+f;k=Highcharts.numberFormat(this.total,0)+" total "+f}else{if(f=="ctr"){l=Highcharts.numberFormat(this.y*100,2)+"% click through";k=""}else{l=Highcharts.numberFormat(this.y,0)+" "+f;k=Highcharts.numberFormat(this.total,0)+" total "+f}}}m+='<span style="font-size: 14px;">'+Highcharts.dateFormat("%A, %B %e, %Y",this.x)+"</span><br/>";m+='<span style="padding: 0; font-weight: 600; color: '+this.series.color+'">'+this.series.name+'</span>: <strong style="font-weight: 600;">'+l+"</strong><br/>";if(h.length>1){m+='<span style="font-size: 12px; color: #666;">';if(this.total>0&&k){m+="("+Highcharts.numberFormat(this.percentage,0)+"% of "+k+")"}else{if(k){m+="("+k+")"}}m+="</span>"}return m}},series:h});b("#dashboard-stats-chart").removeClass("chart-loading")};a.setupPieChart=function(c,d,e){this.impressionPieChart=new Highcharts.Chart({chart:{renderTo:c,plotBackgroundColor:null,plotShadow:true,margin:0},title:{text:d},tooltip:{formatter:function(){return"<b>"+this.point.name+"</b>: "+this.point.total+" "+d}},plotOptions:{pie:{allowPointSelect:true,cursor:"pointer",dataLabels:{enabled:false,color:"#000000",connectorColor:"#000000",formatter:function(){return"<b>"+this.point.name+"</b>: "+this.percentage.toFixed(2)+" %"}},showInLegend:true}},legend:{verticalAlign:"bottom"},series:[{type:"pie",name:d,data:e}]})};a.chartError=function(){b("#dashboard-stats-chart").removeClass("chart-loading").addClass("chart-error")}})(mopub.Chart=mopub.Chart||{},this.jQuery);