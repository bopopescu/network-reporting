{% extends 'reports/base.html' %}
{% load filters %}
{% block pageTitle %}
          <div class="breadcrumb">
            <a class="linkIcon breadcrumb-back" href="{% url reports_index %}"><span class="ui-icon ui-icon-arrowthick-1-w"></span> Back to Reports</a>
            <h1>{{report.name}}</h1>
          </div>
{% endblock pageTitle %}

{% block dateButtons %}{% endblock dateButtons %}

{% block titleBarRight %}
    <span class='titlebar-right'>
        <a class='button' id='reports-view-editReportButton' href='#'>Edit report settings</a>
    </span>
{% endblock titleBarRight %}

{% block messageCenter %}{% endblock messageCenter %}
{% block content %}
<input id='reportKey' type='hidden' value='{{report.key}}' />
<script type='text/javascript'>
    $(document).ready(function() {
            $('#report-table').dataTable({
                'bJQueryUI':true,
                'aLengthMenu': [[50,100,-1], [50, 100, 'All']],
                'iDisplayLength' : 50
            });
    });
</script>
<div class='buttonBank buttonBank-right'>
    {% comment %} <a class='button' id='reports-view-exportReportButton' href='#'>Export</a>
    <a class='button' id='reports-view-sendReportButton' href='#'>Send</a> {% endcomment %}
    <a class='button' id='reports-view-runReportButton' href='/reports/run/{{report.key}}'>Run Report</a>
    <a class='button' id='reports-view-saveReportButton' href='#'>Save</a>
    <a class='button' id='reports-view-saveAsReportButton' href='#'>Save As</a>
</div>
<h2>{{report.dim_details}}<br/><span style='font-weight:normal;' class="muted">({{report.start|date:"M j, Y"}} - {{report.end|date:"M j, Y"}})</span></h2>
<div id='table-goes-here' class='tabled'>
    {{report.html_data|safe}}
    </div>

     <div id='reportFormSaveAs-container' style='display: none;'>
        <form action="{% url add_report %}" method="POST" accept-charset="utf-8" id="reportUpdateForm">
            <fieldset id="reportUpdateForm-details" class="alt">
                <div id="reportUpdateForm-fragment" class="reportUpdateForm-fragment">
                    {{report_fragment.as_template}}
                </div>
                <input type='hidden' name='saved' value='True' />
                <div class='clear'></div>
                <div class='form-submit'>
                    <span id='reportUpdateForm-success' class='hidden'>Success!</span>
                    <span class='buttonWrap'><a href='#' class='button' id='reportUpdateForm-submit'>Save As</a></span>
                    <span class='buttonWrap'><a href='#' class='button' id='reportUpdateForm-cancel'>Cancel</a></span>
                </div>
            </fieldset>
        </form>
    </div>
   
    <div id='reportForm-container' style='display: none;'>
        <form action="{% url add_report %}" method="POST" accept-charset="utf-8" id="reportCreateForm">
            <fieldset id="reportAddForm-details" class="alt">
                <div id="reportAddForm-fragment" class="reportAddForm-fragment">
                    {{report_fragment.as_template}}
                </div>
                <div class='clear'></div>
                <div class='form-submit'>
                    <span id='reportCreateForm-success' class='hidden'>Success!</span>
                    <span class='buttonWrap'><a href='#' class='button' id='reportCreateForm-submit'>Run</a></span>
                    <span class='buttonWrap'><a href='#' class='button' id='reportCreateForm-cancel'>Cancel</a></span>
                </div>
            </fieldset>
        </form>
    </div>

{% endblock content %}
