{% extends 'publisher/base.html' %}

{% load filters %}

{% block pageTitleTag %}
  - Dashboard ( Alpha )
{% endblock %}

{% block extraScripts %}
{% include_script 'controllers/publisher' %}


{% include_script "libs/rickshaw" %}
{% include_script "libs/Rickshaw.Graph.Axis.X" %}
{% include_script "libs/Rickshaw.Graph.MoPubHoverDetail" %}
{% include_script "libs/moment.min" %}

<script type="text/javascript">
$(function () {
    DashboardController.initializeDashboard({
        account: '{{ account.key }}',
        names: {{ names|to_json|safe }}
    });
});
</script>
<script id="chart" type="text/html">
{% include 'publisher/partials/dashboard_chart.html' %}
</script>
<script id="filter_row" type="text/html">
{% include 'publisher/partials/dashboard_filter_row.html' %}
</script>
{% endblock extraScripts %}

{% block pageTitle %}
  <h1>New Fucking Decent Dashboard</h1>
{% endblock pageTitle %}

{% block dateButtons %}{% endblock dateButtons %}

{% block titleBarRight %}{% endblock titleBarRight %}


{% block content %}

  <div id="controls">

    <div id="datepicker-custom-range" class="hidden">
      <div class="date-field-container">
        <span class="start-date date-label"> From: </span>
        <input id="datepicker-start-input"
               name="start-date"
               type="text"
               value='{{ start_date|date:'m-d-Y' }}'
               data-date='{{ start_date|date:'m-d-Y' }}'
               data-date-format="mm-dd-yyyy" />
      </div>
      <div class="date-field-container">
        <span class="end-date date-label"> To: </span>
        <input id="datepicker-end-input"
               name="end-date"
               type="text"
               value="{{ end_date|date:"m-d-Y" }}"
               data-date='{{ end_date|date:'m-d-Y' }}'
               data-date-format="mm-dd-yyyy" />
       </div>
       <a id="custom-date-submit" class="right btn btn-primary"> Submit </a>
    </div>

    <select name="date_range">
      <option value="day">Day</option>
      <option selected="selected" value="week">Week</option>
      <option value="two_weeks">Two Weeks</option>
      <option value="custom">Custom</option>
    </select>
    <span class="hidden" id="custom_date_range"></span>

    <select name="granularity">
      <option value="hourly">Hourly</option>
      <option selected="selected" value="daily">Daily</option>
    </select>

    <label>
      <input name="compare" type="checkbox" /> Compare to <span id="comparison_range">the week before</span>
    </label>

    <button class="btn btn-small" id="export">Export</button>

    <div class="modal hidden" id="export_wizard">
      <div class="modal-header">
        <a class="close" data-dismiss="modal">Ã—</a>
        <h3>Export</h3>
        </div>
        <div class="modal-body">
          Breakdown by
          <select name="advertiser_breakdown">
            <option value=""></option>
            <option value="source">Source</option>
            <option value="campaign">Campaign</option>
            <option value="adgroup">Ad Group</option>
          </select>
          and
          <select name="publisher_breakdown">
            <option value=""></option>
            <option value="app">App</option>
            <option value="adunit">Ad Unit</option>
          </select>
        </div>
        <div class="modal-footer">
          <button class="btn" data-dismiss="modal">Cancel</button>
          <button class="btn btn-primary" id="download">Download</button>
        </div>
    </div>

</div>

<div id="charts">

  <div id="rev" class="chart_container">

    <div class="summed_stats">
      <div class="title">Revenue</div>
      <div class="value"></div>
      <div class="delta"></div>
    </div>

    <div id="rev_chart" class="chart"></div>

  </div>

  <div id="imp" class="chart_container">

    <div class="summed_stats">
      <div class="title">Impressions</div>
      <div class="value"></div>
      <div class="delta"></div>
    </div>

    <div id="imp_chart" class="chart"></div>

  </div>

  <div id="clk" class="chart_container">

    <div class="summed_stats">
      <div class="title">Clicks</div>
      <div class="value"></div>
      <div class="delta"></div>
    </div>

    <div id="clk_chart" class="chart"></div>

  </div>

  <div id="ctr" class="chart_container">

    <div class="summed_stats">
      <div class="title">CTR</div>
      <div class="value"></div>
      <div class="delta"></div>
    </div>

    <div id="ctr_chart" class="chart"></div>

  </div>

</div>

<div id="filters">
    {# <label><input name="advertiser_compare" type="checkbox" /> Compare</label> #}
    <table id="advertiser">
        <thead>
            <tr>
                <th class="title" colspan="2">Campaigns and Adgroups</th>
                <th class="rev" colspan="2">Revenue</th>
                <th class="imp" colspan="2">Impressions</th>
                <th class="clk" colspan="2">Clicks</th>
                <th class="ctr" colspan="2">CTR</th>
            </tr>
        </thead>
        <tbody>
            <tr class="source" id="direct">
                <td></td>
                <td class="name">Direct</td>
                <td class="stat rev"><span></span></td>
                <td class="delta rev"><span></span></td>
                <td class="stat imp"><span></span></td>
                <td class="delta imp"><span></span></td>
                <td class="stat clk"><span></span></td>
                <td class="delta clk"><span></span></td>
                <td class="stat ctr"><span></span></td>
                <td class="delta ctr"><span></span></td>
            </tr>
            <tr class="source" id="mpx">
                <td></td>
                <td class="name">Marketplace</td>
                <td class="stat rev"><span></span></td>
                <td class="delta rev"><span></span></td>
                <td class="stat imp"><span></span></td>
                <td class="delta imp"><span></span></td>
                <td class="stat clk"><span></span></td>
                <td class="delta clk"><span></span></td>
                <td class="stat ctr"><span></span></td>
                <td class="delta ctr"><span></span></td>
            </tr>
            <tr class="source" id="network">
                <td></td>
                <td class="name">Networks</td>
                <td class="stat rev"><span></span></td>
                <td class="delta rev"><span></span></td>
                <td class="stat imp"><span></span></td>
                <td class="delta imp"><span></span></td>
                <td class="stat clk"><span></span></td>
                <td class="delta clk"><span></span></td>
                <td class="stat ctr"><span></span></td>
                <td class="delta ctr"><span></span></td>
            </tr>
        </tbody>
    </table>

    {# <label><input name="publisher_compare" type="checkbox" /> Compare</label> #}
    <table id="publisher">
        <thead>
            <tr>
                <th class="title" colspan="2">Apps and Adunits</th>
                <th class="rev" colspan="2">Revenue</th>
                <th class="imp" colspan="2">Impressions</th>
                <th class="clk" colspan="2">Clicks</th>
                <th class="ctr" colspan="2">CTR</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>
{% endblock content %}
